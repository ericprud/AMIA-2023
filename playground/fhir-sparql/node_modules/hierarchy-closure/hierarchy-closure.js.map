{"version":3,"file":"hierarchy-closure.js","sources":["../../../../../../fhircat/fhir-sparql/fhir-sparql-js/node_modules/hierarchy-closure/hierarchy-closure.js"],"sourcesContent":["var HierarchyClosure = (function () {\n  /** create a hierarchy object\n   * This object keeps track of direct children and parents as well as transitive children and parents.\n   */\n  function makeHierarchy () {\n    let roots = {}\n    let parents = {}\n    let children = {}\n    let holders = {}\n    return {\n      add: function (parent, child) {\n        if (// test if this is a novel entry.\n          (parent in children && children[parent].indexOf(child) !== -1)) {\n          return\n        }\n        let target = parent in holders\n          ? getNode(parent)\n          : (roots[parent] = getNode(parent)) // add new parents to roots.\n        let value = getNode(child)\n\n        target[child] = value\n        delete roots[child]\n\n        // // maintain hierarchy (direct and confusing)\n        // children[parent] = children[parent].concat(child, children[child])\n        // children[child].forEach(c => parents[c] = parents[c].concat(parent, parents[parent]))\n        // parents[child] = parents[child].concat(parent, parents[parent])\n        // parents[parent].forEach(p => children[p] = children[p].concat(child, children[child]))\n\n        // maintain hierarchy (generic and confusing)\n        updateClosure(children, parents, child, parent)\n        updateClosure(parents, children, parent, child)\n        function updateClosure (container, members, near, far) {\n          container[far] = container[far].filter(\n            e => /* e !== near && */ container[near].indexOf(e) === -1\n          ).concat(container[near].indexOf(near) === -1 ? [near] : [], container[near])\n          container[near].forEach(\n            n => (members[n] = members[n].filter(\n              e => e !== far && members[far].indexOf(e) === -1\n            ).concat(members[far].indexOf(far) === -1 ? [far] : [], members[far]))\n          )\n        }\n\n        function getNode (node) {\n          if (!(node in holders)) {\n            parents[node] = []\n            children[node] = []\n            holders[node] = {}\n          }\n          return holders[node]\n        }\n      },\n      roots: roots,\n      parents: parents,\n      children: children\n    }\n  }\n\n  function depthFirst (n, f, p) {\n    return Object.keys(n).reduce((ret, k) => {\n      return ret.concat(\n        depthFirst(n[k], f, k),\n        p ? f(k, p) : []) // outer invocation can have null parent\n    }, [])\n  }\n\n  return { create: makeHierarchy, depthFirst }\n})()\n\n/* istanbul ignore next */\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\n  module.exports = HierarchyClosure\n}\n"],"names":["require"],"mappings":"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","x_google_ignoreList":[0]}